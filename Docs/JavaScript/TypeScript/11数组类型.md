# æ•°ç»„ç±»å‹

<!-- ## ç›®å½•

- [æ•°ç»„ç±»å‹](#æ•°ç»„ç±»å‹)
  - [ç›®å½•](#ç›®å½•)
  - [è‡ªåŠ¨æ¨æ–­](#è‡ªåŠ¨æ¨æ–­)
  - [ç±»å‹é…ç½®](#ç±»å‹é…ç½®)
  - [åªè¯»æ•°ç»„](#åªè¯»æ•°ç»„)
  - [å¤šç»´æ•°ç»„](#å¤šç»´æ•°ç»„) -->

## è‡ªåŠ¨æ¨æ–­

> ä¸å®šä¹‰ç±»å‹ï¼Œæ¨æ–­ä¸ºnever

```typescript
let array = [];  //never
```

> æ¨æ–­ä¸ºå­—ç¬¦ä¸²æ•°ç»„

```typescript
const akun = ['akun.com', 'akun001'] //const akun : string[]
hd.push(100) //å› ä¸ºç±»å‹ä¸å…è®¸ï¼Œæ‰€ä»¥æŠ¥é”™
```

> æ¨æ–­ä¸ºæ•°ç»„å…è®¸çš„å€¼ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å€¼

```typescript
const akun = ['akun.com', 'akun001',100] //const akun :(string|number)[]
akun .push(100,'kunkun') //æ•°ç»„å…è®¸æ•°å€¼ã€å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ç¼–è¯‘é€šè¿‡
```

> ğŸ“Œå¦‚æœä¸€å¼€å§‹æ˜¯anyç±»å‹ï¼Œé‚£ä¹ˆä½ åç»­å¾€é‡Œæ¨ä»€ä¹ˆï¼Œå°±æ˜¯ä»€ä¹ˆç±»å‹ä½†æ˜¯ï¼Œç±»å‹æ¨æ–­çš„è‡ªåŠ¨æ›´æ–°åªå‘ç”Ÿåˆå§‹å€¼ä¸ºç©ºæ•°ç»„çš„æƒ…å†µã€‚å¦‚æœåˆå§‹å€¼ä¸æ˜¯ç©ºæ•°ç»„ï¼Œç±»å‹æ¨æ–­å°±ä¸ä¼šæ›´æ–°ã€‚**ï¼ˆæµ‹è¯•å·²ç»ä¸æˆç«‹äº†ï¼‰**

```typescript
const arr = [];
arr // ä»¥å‰ä¼šæ¨æ–­ä¸º any[] ç°åœ¨æ˜¯neverç±»å‹  

arr.push(123);
arr // error

arr.push('abc');
arr // error
```

## ç±»å‹é…ç½®

> å­—ç¬¦ä¸²æ•°ç»„

```typescript
// å­—ç¬¦ä¸²ç±»å‹æ•°ç»„
let array02: string[] = [];
array02.push("hello");
```

> æ•°å€¼å‹æ•°ç»„

```typescript
let array03: number[] = [];
array03.push(123);
```

> å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸»åŠ¨å®šä¹‰è”åˆç±»å‹çš„æ•°ç»„

```typescript
const akun :(string |number)[] = ['akun.com', 'akun001',100] 
//const akun :(string|number)[]
akun .push(100,'kunkun') //æ•°ç»„å…è®¸æ•°å€¼ã€å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ç¼–è¯‘é€šè¿‡
```

> ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹æ¥å£°æ˜æ•°ç»„

```typescript
let akun:Array<string> =[]
akun.push('akun002','akun001')
```

åˆ›å»ºå€¼ç±»å‹å­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œå¹¶å¡«å……å†…å®¹ä¸º`akun001`ã€‚åœ¨ TypeScript ä¸­ï¼Œå¦‚æœæ‚¨ä½¿ç”¨äº†ç±»å‹æ³¨è§£ `Array<string>(3)` æ¥å£°æ˜æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ `fill()` æ–¹æ³•å¡«å……æ•°ç»„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç±»å‹é”™è¯¯ã€‚

> ğŸ“Œ`Array<string>(3)` è¡¨ç¤ºä¸€ä¸ªé•¿åº¦ä¸º 3 çš„å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å£°æ˜ã€‚ä½†æ˜¯ `fill()` æ–¹æ³•å¡«å……çš„æ˜¯å€¼è€Œä¸æ˜¯ç±»å‹ã€‚å› æ­¤ï¼Œ`fill("akun001")` å°†å­—ç¬¦ä¸² `"akun001"` å¡«å……åˆ°æ•°ç»„çš„æ¯ä¸ªä½ç½®ï¼Œå¹¶ä¸ä¼šæ”¹å˜æ•°ç»„çš„ç±»å‹ã€‚

è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯åœ¨å£°æ˜æ•°ç»„æ—¶ä¸ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»å‹æ–­è¨€ `as`ï¼š

```typescript
let akun = new Array(3).fill("akun001") as string[];
console.log(akun); // ["akun001", "akun001", "akun001"]
```

## åªè¯»æ•°ç»„

> JavaScript è§„å®šï¼Œ`const`å‘½ä»¤å£°æ˜çš„æ•°ç»„å˜é‡æ˜¯å¯ä»¥æ”¹å˜æˆå‘˜çš„ã€‚

```typescript
const array06 = [0, 1];
array06[0] = 2;
console.log(array06); //[2,1]
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œä¿®æ”¹`const`å‘½ä»¤å£°æ˜çš„æ•°ç»„çš„æˆå‘˜æ˜¯å…è®¸çš„ã€‚ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™ç¡®å®æœ‰å£°æ˜ä¸ºåªè¯»æ•°ç»„çš„éœ€æ±‚ï¼Œå³ä¸å…è®¸å˜åŠ¨æ•°ç»„æˆå‘˜ã€‚

> TypeScript å…è®¸å£°æ˜åªè¯»æ•°ç»„ï¼Œæ–¹æ³•æ˜¯åœ¨æ•°ç»„ç±»å‹å‰é¢åŠ ä¸Š`readonly`å…³é”®å­—ã€‚

```typescript
const array07: readonly number[] = [0, 1];
// array07[1] = 2; // æŠ¥é”™
// array07.push(3); // æŠ¥é”™
// delete array07[0]; // æŠ¥é”™
```

> ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ`arr`æ˜¯ä¸€ä¸ªåªè¯»æ•°ç»„ï¼Œåˆ é™¤ã€ä¿®æ”¹ã€æ–°å¢æ•°ç»„æˆå‘˜éƒ½ä¼šæŠ¥é”™ã€‚TypeScript å°†`readonly number[]`ä¸`number[]`è§†ä¸ºä¸¤ç§ä¸ä¸€æ ·çš„ç±»å‹ï¼Œåè€…æ˜¯å‰è€…çš„å­ç±»å‹ã€‚

> è¿™æ˜¯å› ä¸ºåªè¯»æ•°ç»„æ²¡æœ‰`pop()`ã€`push()`ä¹‹ç±»ä¼šæ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼Œæ‰€ä»¥`number[]`çš„æ–¹æ³•æ•°é‡è¦å¤šäº`readonly number[]`ï¼Œè¿™æ„å‘³ç€`number[]`å…¶å®æ˜¯`readonly number[]`çš„å­ç±»å‹ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œå­ç±»å‹ç»§æ‰¿äº†çˆ¶ç±»å‹çš„æ‰€æœ‰ç‰¹å¾ï¼Œå¹¶åŠ ä¸Šäº†è‡ªå·±çš„ç‰¹å¾ï¼Œæ‰€ä»¥å­ç±»å‹`number[]`å¯ä»¥ç”¨äºæ‰€æœ‰ä½¿ç”¨çˆ¶ç±»å‹çš„åœºåˆï¼Œåè¿‡æ¥å°±ä¸è¡Œã€‚

```typescript
let array08: number[] = [0, 1];
let array09: readonly number[] = array08; // æ­£ç¡®

array08 = array09; // æŠ¥é”™
array09 = array08; //æ­£ç¡®
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå­ç±»å‹`number[]`å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹`readonly number[]`ï¼Œä½†æ˜¯åè¿‡æ¥å°±ä¼šæŠ¥é”™ã€‚

ç”±äºåªè¯»æ•°ç»„æ˜¯æ•°ç»„çš„çˆ¶ç±»å‹ï¼Œæ‰€ä»¥å®ƒä¸èƒ½ä»£æ›¿æ•°ç»„ã€‚è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“äº§ç”Ÿä»¤äººå›°æƒ‘çš„æŠ¥é”™ã€‚

```typescript
function getSum(s:number[]) {
  // ...
}

const arr:readonly number[] = [1, 2, 3];

getSum(arr) // æŠ¥é”™

```

> ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‡½æ•°`getSum()`çš„å‚æ•°`s`æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥åªè¯»æ•°ç»„å°±ä¼šæŠ¥é”™ã€‚åŸå› å°±æ˜¯åªè¯»æ•°ç»„æ˜¯æ•°ç»„çš„çˆ¶ç±»å‹ï¼Œçˆ¶ç±»å‹ä¸èƒ½æ›¿ä»£å­ç±»å‹ã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç±»å‹æ–­è¨€`getSum(arr as number[])`

> ğŸ“Œæ³¨æ„ï¼Œ`readonly`å…³é”®å­—ä¸èƒ½ä¸æ•°ç»„çš„æ³›å‹å†™æ³•ä¸€èµ·ä½¿ç”¨ã€‚

```typescript
// æŠ¥é”™
const arr:readonly Array<number> = [0, 1];
```

> ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œreadonlyä¸æ•°ç»„çš„æ³›å‹å†™æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚å®é™…ä¸Šï¼ŒTypeScript æä¾›äº†ä¸¤ä¸ªä¸“é—¨çš„æ³›å‹ï¼Œç”¨æ¥ç”Ÿæˆåªè¯»æ•°ç»„çš„ç±»å‹ã€‚

```typescript
const a1:ReadonlyArray<number> = [0, 1];

const a2:Readonly<number[]> = [0, 1];
```

> ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ³›å‹`ReadonlyArray<T>`å’Œ`Readonly<T[]>`éƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆåªè¯»æ•°ç»„ç±»å‹ã€‚ä¸¤è€…å°–æ‹¬å·é‡Œé¢çš„å†™æ³•ä¸ä¸€æ ·ï¼Œ`Readonly<T[]>`çš„å°–æ‹¬å·é‡Œé¢æ˜¯æ•´ä¸ªæ•°ç»„ï¼ˆ`number[]`ï¼‰ï¼Œè€Œ`ReadonlyArray<T>`çš„å°–æ‹¬å·é‡Œé¢æ˜¯æ•°ç»„æˆå‘˜ï¼ˆ`number`ï¼‰ã€‚

åªè¯»æ•°ç»„è¿˜æœ‰ä¸€ç§å£°æ˜æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨â€œconst æ–­è¨€â€ã€‚

```typescript
const arr = [0, 1] as const;

arr[0] = [2]; // æŠ¥é”™ 
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ`as const`å‘Šè¯‰ TypeScriptï¼Œæ¨æ–­ç±»å‹æ—¶è¦æŠŠå˜é‡`arr`æ¨æ–­ä¸ºåªè¯»æ•°ç»„ï¼Œä»è€Œä½¿å¾—æ•°ç»„æˆå‘˜æ— æ³•æ”¹å˜ã€‚

## å¤šç»´æ•°ç»„

TypeScript ä½¿ç”¨`T[][]`çš„å½¢å¼ï¼Œè¡¨ç¤ºäºŒç»´æ•°ç»„ï¼Œ`T`æ˜¯æœ€åº•å±‚æ•°ç»„æˆå‘˜çš„ç±»å‹ã€‚

```typescript
var multi: number[][] = [
  [1, 2, 3],
  [23, 24, 25],
];
console.log(multi);

```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡`multi`çš„ç±»å‹æ˜¯`number[][]`ï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæœ€åº•å±‚çš„æ•°ç»„æˆå‘˜ç±»å‹æ˜¯`number`
